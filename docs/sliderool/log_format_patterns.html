<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>log_format_patterns (sliderool.log_format_patterns)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="index.html">Up</a> â€“ <a href="index.html">sliderool</a> &#x00BB; log_format_patterns</nav><h1 id="sliderool-log-format-patterns"><a href="#sliderool-log-format-patterns" class="anchor"></a>Sliderool log format patterns</h1><p>Sliderool allows you to specify the format of lines in your logs, using patterns with a similar syntax to <a href="https://docs.nginx.com/nginx/admin-guide/monitoring/logging/">NGINX log formats</a>.</p><p>A Sliderool log pattern consists of variables, which are <code>$</code> followed by one or more characters that are either alphanumeric or underscores, and the remainder of the pattern, which is treated as an <a href="https://caml.inria.fr/pub/docs/manual-ocaml/libref/Str.html#VALregexp">OCaml Str regular expressions</a>. It is possible to escape <code>$</code> with a backslash so it is treated as a regular expression not the start of a variable; this means that actual backslashes must also be escaped.</p><p>Example: <code>&quot;$address - $user \[$timestamp\] &quot;$request_type $route $protocol&quot; $status $body_bytes_sent &quot;$referrer&quot; &quot;$user_agent&quot;</code> is the pattern for the default NGINX format. As an OCaml string literal, the backslashes and quotes would need to be escaped.</p><p>Gotchas:</p><ul><li>Since <code>[</code> and <code>]</code> are special characters in regular expressions, they must be escaped for log formats that contain them (such as the default NGINX format)</li><li>OCaml Str regular expressions have an unusual syntax that requires <code>(</code>, <code>)</code> and <code>|</code> to be escaped with backslashes when used as metacharacters. Due to the combination of escaping by the OCaml string parser and Sliderool, this means preceding them with four backslashes if they you are writing a pattern as an OCaml double-quoted string literal.</li></ul></header></div></body></html>